<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rock Paper Scissors</title>
    <style>
        body {
            font-family: 'Arial', sans-serif;
            background-color: #222;
            color: #fff;
            display: grid;
            place-items: center;
            min-height: 100vh;
            margin: 0;
        }

        .container {
            background-color: #333;
            padding: 30px;
            border-radius: 10px;
            text-align: center;
        }

        h1 {
            font-size: 3em;
            margin-bottom: 20px;
        }

        .choices {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
            margin-bottom: 0px;
        }

        .choice {
            cursor: pointer;
            border: 3px solid #fff;
            border-radius: 50%;
            padding: 30px;
            transition: transform 0.2s ease;
        }

        .choice:hover {
            transform: scale(1.1);
        }

        .choice img {
            width: 80px;
            height: 80px;
        }

        .result {
            font-size: 2em;
            margin-bottom: 20px;
        }

        .score {
            display: flex;
            justify-content: space-around;
            font-size: 1.5em;
        }

        .score span {
            font-weight: bold;
        }

        .peer-info {
            display: none;
            margin-top: 20px;
        }

        .peer-info input {
            padding: 8px;
            border: 1px solid #ccc;
            border-radius: 5px;
            margin-right: 10px;
        }

        .reset {
            padding: 10px 20px;
            background-color: red;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            margin-top: 10px;
        }
        .auto-play {
            padding: 10px 20px;
            background-color: #4CAF50;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            margin-top: 10px;
        }

        .game-display {
            display: flex;
            justify-content: space-around;
            margin-top: 20px;
        }

        .player-choice,
        .computer-choice {
            text-align: center;
        }

        .player-choice img,
        .computer-choice img {
            width: 100px;
            height: 100px;
        }
        .player-choice, .computer-choice {
            display: none; 
        }
        .reseti{
            padding: 10px 20px;
            background-color: blue;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            margin-top: 10px;
        }
        
    </style>
</head>
<body>
    <div class="container">
        <h1 style="margin-top: 0px;">Rock Paper Scissors</h1>
        <div class="choices" >
            <div class="choice" data-move="rock">
                <img src="image/rock-emoji.png" alt="Rock">
            </div>
            <div class="choice" data-move="paper">
                <img src="image/paper-emoji.png" alt="Paper">
            </div>
            <div class="choice" data-move="scissors">
                <img src="image/scissors-emoji.png" alt="Scissors">
            </div>
        </div>
        <div class="game-display">
            <div class="player-choice">
                <h2 style="margin-bottom: 0px;">You</h2>
                <img src="" alt="Your Choice" id="player-image">
            </div>
            <div class="computer-choice">
                <h2 style="margin-bottom: 0px;">Computer</h2>
                <img src="" alt="Computer's Choice" id="computer-image">
            </div>
        </div>
        <div class="result"></div>
        <div class="score">
            <span>Wins: 0</span>
            <span>Losses: 0</span>
            <span>Ties: 0</span>
        </div>
        <button onclick="resetGame()" class="reset">Reset</button>
        <button class="auto-play">Auto Play</button>
        <div>
            <button onclick="setMode('computer')" class="reseti" >Play Against Computer</button>
            <button class="reseti" onclick="setMode('human')">Play Against Human</button>
        </div>
        <div class="peer-info">
            <p>Your Peer ID: <span id="my-peer-id"></span></p>
            <input type="text" id="peer-id-input" placeholder="Enter Peer ID to connect">
            <button onclick="connectToPeer()" class="auto-play">Connect</button>
        </div>
       
    </div>

    <script src="https://unpkg.com/peerjs@1.3.2/dist/peerjs.min.js"></script>
    <script>
        let score = { wins: 0, losses: 0, ties: 0 };
        let mode = 'computer';
        let conn;
        let localMove = null;
        let remoteMove = null;
        let autoPlayInterval;

        const peer = new Peer();

        peer.on('open', id => {
            document.getElementById('my-peer-id').textContent = id;
        });

        peer.on('connection', connection => {
            conn = connection;
            conn.on('data', data => {
                remoteMove = data.move;
                if (localMove !== null) {
                    playGame(localMove, remoteMove);
                }
            });
        });

        function connectToPeer() {
            const peerId = document.getElementById('peer-id-input').value;
            conn = peer.connect(peerId);
            conn.on('open', () => {
                conn.on('data', data => {
                    remoteMove = data.move;
                    if (localMove !== null) {
                        playGame(localMove, remoteMove);
                    }
                });
            });
        }

        function setMode(newMode) {
            mode = newMode;
            const peerInfo = document.querySelector('.peer-info');
            peerInfo.style.display = mode === 'human' ? 'block' : 'none';
        }

        function playGame(playerMove, computerMove) {
            let result = '';
            if (playerMove === computerMove) {
                result = 'Tie';
                score.ties++;
            } else if (
                (playerMove === 'rock' && computerMove === 'scissors') ||
                (playerMove === 'paper' && computerMove === 'rock') ||
                (playerMove === 'scissors' && computerMove === 'paper')
            ) {
                result = 'You win';
                score.wins++;
            } else {
                result = 'You lose';
                score.losses++;
            }
            updateResult(result);
            updateScore();

            // Update image display
            document.getElementById('player-image').src = `image/${playerMove}-emoji.png`;
            document.getElementById('computer-image').src = `image/${computerMove}-emoji.png`;
        }

        function updateResult(result) {
            document.querySelector('.result').textContent = result;
        }

        function updateScore() {
            const scoreElements = document.querySelectorAll('.score span');
            scoreElements[0].textContent = `Wins: ${score.wins}`;
            scoreElements[1].textContent = `Losses: ${score.losses}`;
            scoreElements[2].textContent = `Ties: ${score.ties}`;
        }

        function autoPlay() {
            const choices = ['rock', 'paper', 'scissors'];
            const playerMove = choices[Math.floor(Math.random() * 3)];
            playGame(playerMove, pickComputerMove());
            updateScore();
        }

        function pickComputerMove() {
            const choices = ['rock', 'paper', 'scissors'];
            return choices[Math.floor(Math.random() * 3)];
        }

        const choices = document.querySelectorAll('.choice');
        choices.forEach(choice => {
            choice.addEventListener('click', () => {
                const move = choice.dataset.move;
                if (mode === 'computer') {
                    playGame(move, pickComputerMove());
                } else {
                    localMove = move;
                    if (conn && conn.open) {
                        conn.send({ move: move });
                    }
                }
                document.querySelector('.player-choice').style.display = 'block';
                document.querySelector('.computer-choice').style.display = 'block';
            });
        });

        const autoPlayButton = document.querySelector('.auto-play');
        autoPlayButton.addEventListener('click', () => {
            
            if (autoPlayButton.textContent === 'Auto Play') {
                
                autoPlayInterval = setInterval(autoPlay, 1000);
                autoPlayButton.textContent = 'Stop';
            } else {
                clearInterval(autoPlayInterval);
                autoPlayButton.textContent = 'Auto Play';
            }
            document.querySelector('.player-choice').style.display = 'block';
                document.querySelector('.computer-choice').style.display = 'block';
        });
        function resetGame() {
            score = { wins: 0, losses: 0, ties: 0 };
            updateScore();
            updateResult('');
            document.getElementById('player-image').src = '';
            document.getElementById('computer-image').src = '';
            localMove = null;
            remoteMove = null;
            document.querySelector('.player-choice').style.display = 'none';
                document.querySelector('.computer-choice').style.display = 'none';
        }
    </script>
</body>
</html>
